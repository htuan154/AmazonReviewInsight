<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√°o C√°o Ng√†y 4 - Logistic Regression V2 v·ªõi Full Features</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        h1 {
            color: #667eea;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1em;
        }
        
        h2 {
            color: #764ba2;
            margin-top: 30px;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }
        
        h3 {
            color: #667eea;
            margin-top: 20px;
            margin-bottom: 10px;
        }
        
        .highlight-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }
        
        .success-box {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
        }
        
        .metric-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .metric-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            border-radius: 15px;
            color: white;
            text-align: center;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
            transition: transform 0.3s ease;
        }
        
        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }
        
        .metric-card h3 {
            color: white;
            margin-bottom: 10px;
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .metric-card .value {
            font-size: 2.5em;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .metric-card .change {
            font-size: 1.1em;
            opacity: 0.9;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-radius: 10px;
            overflow: hidden;
        }
        
        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }
        
        td {
            padding: 12px 15px;
            border-bottom: 1px solid #ddd;
        }
        
        tr:hover {
            background-color: #f5f5f5;
        }
        
        .checkmark {
            color: #38ef7d;
            font-weight: bold;
            font-size: 1.2em;
        }
        
        code {
            background-color: #f4f4f4;
            padding: 2px 8px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            color: #764ba2;
        }
        
        .improvement {
            color: #38ef7d;
            font-weight: bold;
        }
        
        ul, ol {
            margin-left: 20px;
            margin-top: 10px;
        }
        
        li {
            margin-bottom: 8px;
        }
        
        .footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 2px solid #ddd;
            color: #666;
        }
        
        .feature-importance {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
        }
        
        .feature-row {
            display: flex;
            align-items: center;
            padding: 8px;
            margin: 5px 0;
            background: white;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .feature-rank {
            font-weight: bold;
            color: #667eea;
            min-width: 30px;
        }
        
        .feature-name {
            flex: 1;
            padding: 0 15px;
            font-family: 'Courier New', monospace;
        }
        
        .feature-coef {
            font-weight: bold;
            min-width: 80px;
            text-align: right;
        }
        
        .feature-coef.positive {
            color: #38ef7d;
        }
        
        .feature-coef.negative {
            color: #f5576c;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìä B√ÅO C√ÅO NG√ÄY 4</h1>
        <div class="subtitle">
            <strong>Logistic Regression V2 v·ªõi Full Features</strong><br>
            D·ª± √°n: Amazon Review Helpfulness Prediction | Nh√≥m HK7<br>
            Ng√†y: 26/10/2025 | Tu·∫•n (Infrastructure) & Thanh (Data Science)
        </div>

        <div class="highlight-box">
            <h2 style="color: white; border: none; margin-top: 0;">üéØ M·ª§C TI√äU NG√ÄY 4</h2>
            <ul style="font-size: 1.1em;">
                <li><strong>Th√™m sentiment features:</strong> VADER sentiment scores (compound, pos, neg, neu)</li>
                <li><strong>Th√™m metadata features:</strong> Product info (price, avg_rating, total_ratings)</li>
                <li><strong>Th√™m interaction features:</strong> rating_deviation, is_long_review</li>
                <li><strong>Target: AUC-PR > 0.45</strong> (c·∫£i thi·ªán so v·ªõi Day 3: 0.4353)</li>
            </ul>
        </div>

        <h2>üìà K·∫æT QU·∫¢ CH√çNH</h2>
        
        <div class="metric-grid">
            <div class="metric-card">
                <h3>AUC-PR Score</h3>
                <div class="value">0.4490</div>
                <div class="change"><span class="checkmark">‚úì</span> +3.1% vs Day 3</div>
            </div>
            
            <div class="metric-card">
                <h3>AUC-ROC Score</h3>
                <div class="value">0.6200</div>
                <div class="change"><span class="checkmark">‚úì</span> +3.9% vs Day 3</div>
            </div>
            
            <div class="metric-card">
                <h3>Accuracy</h3>
                <div class="value">71.35%</div>
                <div class="change"><span class="checkmark">‚úì</span> +1.2% vs Day 3</div>
            </div>
            
            <div class="metric-card">
                <h3>Features S·ª≠ D·ª•ng</h3>
                <div class="value">11</div>
                <div class="change">+ TF-IDF (20K dims)</div>
            </div>
        </div>

        <div class="success-box">
            <h3 style="color: white; margin-top: 0;">üéâ TH√ÄNH C√îNG: C·∫£i Thi·ªán V·ªõi Full Features</h3>
            <p style="font-size: 1.1em; margin-top: 10px;">
                <strong>Th√™m 9 features m·ªõi ‚Üí AUC-PR tƒÉng t·ª´ 0.4353 l√™n 0.4490!</strong><br>
                Sentiment v√† metadata features ƒë√£ gi√∫p model h·ªçc ƒë∆∞·ª£c pattern t·ªët h∆°n.
            </p>
        </div>

        <h2>üìä SO S√ÅNH DAY 3 VS DAY 4</h2>
        
        <table>
            <thead>
                <tr>
                    <th>Metric</th>
                    <th>Day 3 Baseline</th>
                    <th>Day 4 Full Features</th>
                    <th>C·∫£i Thi·ªán</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>AUC-PR</strong></td>
                    <td>0.4353</td>
                    <td><strong>0.4490</strong></td>
                    <td><span class="improvement">+3.1%</span></td>
                </tr>
                <tr>
                    <td><strong>AUC-ROC</strong></td>
                    <td>0.5967</td>
                    <td><strong>0.6200</strong></td>
                    <td><span class="improvement">+3.9%</span></td>
                </tr>
                <tr>
                    <td><strong>Accuracy</strong></td>
                    <td>70.12%</td>
                    <td><strong>71.35%</strong></td>
                    <td><span class="improvement">+1.2%</span></td>
                </tr>
                <tr>
                    <td><strong>Training Time</strong></td>
                    <td>~20 gi√¢y</td>
                    <td><strong>24.2 gi√¢y</strong></td>
                    <td>+21%</td>
                </tr>
                <tr>
                    <td><strong>Features</strong></td>
                    <td>TF-IDF + 2</td>
                    <td><strong>TF-IDF + 11</strong></td>
                    <td>+9 features</td>
                </tr>
            </tbody>
        </table>

        <h2>üî¨ FEATURES M·ªöI ƒê∆Ø·ª¢C TH√äM</h2>
        
        <h3>1. Sentiment Features (4 features)</h3>
        <table>
            <thead>
                <tr>
                    <th>Feature</th>
                    <th>M√¥ T·∫£</th>
                    <th>Coefficient</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>sentiment_compound</code></td>
                    <td>T·ªïng h·ª£p sentiment (-1 ƒë·∫øn +1)</td>
                    <td>-0.3301</td>
                </tr>
                <tr>
                    <td><code>sentiment_pos</code></td>
                    <td>ƒêi·ªÉm sentiment d∆∞∆°ng (0 ƒë·∫øn 1)</td>
                    <td>+0.1712</td>
                </tr>
                <tr>
                    <td><code>sentiment_neg</code></td>
                    <td>ƒêi·ªÉm sentiment √¢m (0 ƒë·∫øn 1)</td>
                    <td>-0.4433</td>
                </tr>
                <tr>
                    <td><code>sentiment_neu</code></td>
                    <td>ƒêi·ªÉm sentiment trung l·∫≠p (0 ƒë·∫øn 1)</td>
                    <td>-0.0485</td>
                </tr>
            </tbody>
        </table>

        <h3>2. Metadata Features (3 features)</h3>
        <table>
            <thead>
                <tr>
                    <th>Feature</th>
                    <th>M√¥ T·∫£</th>
                    <th>Coefficient</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>price</code></td>
                    <td>Gi√° s·∫£n ph·∫©m ($)</td>
                    <td>+0.0088</td>
                </tr>
                <tr>
                    <td><code>product_avg_rating_meta</code></td>
                    <td>Rating trung b√¨nh c·ªßa s·∫£n ph·∫©m</td>
                    <td>-0.4853</td>
                </tr>
                <tr>
                    <td><code>product_total_ratings</code></td>
                    <td>T·ªïng s·ªë ratings c·ªßa s·∫£n ph·∫©m</td>
                    <td>-</td>
                </tr>
            </tbody>
        </table>

        <h3>3. Interaction Features (2 features)</h3>
        <table>
            <thead>
                <tr>
                    <th>Feature</th>
                    <th>M√¥ T·∫£</th>
                    <th>Coefficient</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>rating_deviation</code></td>
                    <td>Ch√™nh l·ªách rating c√° nh√¢n vs trung b√¨nh</td>
                    <td>+0.5932</td>
                </tr>
                <tr>
                    <td><code>is_long_review</code></td>
                    <td>Review d√†i (> 100 t·ª´)</td>
                    <td><strong>+1.6122</strong></td>
                </tr>
            </tbody>
        </table>

        <h2>üèÜ TOP 10 FEATURES QUAN TR·ªåNG NH·∫§T</h2>
        
        <div class="feature-importance">
            <div class="feature-row">
                <div class="feature-rank">1.</div>
                <div class="feature-name">is_long_review</div>
                <div class="feature-coef positive">+1.6122</div>
            </div>
            <div class="feature-row">
                <div class="feature-rank">2.</div>
                <div class="feature-name">rating_deviation</div>
                <div class="feature-coef positive">+0.5932</div>
            </div>
            <div class="feature-row">
                <div class="feature-rank">3.</div>
                <div class="feature-name">product_avg_rating_meta</div>
                <div class="feature-coef negative">-0.4853</div>
            </div>
            <div class="feature-row">
                <div class="feature-rank">4.</div>
                <div class="feature-name">sentiment_neg</div>
                <div class="feature-coef negative">-0.4433</div>
            </div>
            <div class="feature-row">
                <div class="feature-rank">5.</div>
                <div class="feature-name">star_rating</div>
                <div class="feature-coef negative">-0.4211</div>
            </div>
            <div class="feature-row">
                <div class="feature-rank">6.</div>
                <div class="feature-name">sentiment_compound</div>
                <div class="feature-coef negative">-0.3301</div>
            </div>
            <div class="feature-row">
                <div class="feature-rank">7.</div>
                <div class="feature-name">sentiment_pos</div>
                <div class="feature-coef positive">+0.1712</div>
            </div>
            <div class="feature-row">
                <div class="feature-rank">8.</div>
                <div class="feature-name">review_length_log</div>
                <div class="feature-coef negative">-0.1493</div>
            </div>
            <div class="feature-row">
                <div class="feature-rank">9.</div>
                <div class="feature-name">sentiment_neu</div>
                <div class="feature-coef negative">-0.0485</div>
            </div>
            <div class="feature-row">
                <div class="feature-rank">10.</div>
                <div class="feature-name">price</div>
                <div class="feature-coef positive">+0.0088</div>
            </div>
        </div>

        <h2>üí° PH√ÇN T√çCH FEATURE IMPORTANCE</h2>
        
        <h3>‚úÖ Positive Features (Helpful Review)</h3>
        <div class="success-box">
            <ol>
                <li><strong>is_long_review (+1.6122):</strong> Review d√†i (>100 t·ª´) c√≥ kh·∫£ nƒÉng helpful r·∫•t cao
                    <ul>
                        <li>ƒê√¢y l√† feature quan tr·ªçng NH·∫§T trong model</li>
                        <li>Review chi ti·∫øt th∆∞·ªùng h·ªØu √≠ch h∆°n review ng·∫Øn</li>
                    </ul>
                </li>
                <li><strong>rating_deviation (+0.5932):</strong> Rating kh√°c bi·ªát v·ªõi trung b√¨nh
                    <ul>
                        <li>Review c√≥ quan ƒëi·ªÉm ri√™ng ƒë∆∞·ª£c ƒë√°nh gi√° cao</li>
                        <li>Kh√¥ng ƒëi theo ƒë√°m ƒë√¥ng ‚Üí c√≥ gi√° tr·ªã th√¥ng tin</li>
                    </ul>
                </li>
                <li><strong>sentiment_pos (+0.1712):</strong> Sentiment d∆∞∆°ng nh·∫π
                    <ul>
                        <li>Review t√≠ch c·ª±c c√≥ xu h∆∞·ªõng helpful h∆°n</li>
                    </ul>
                </li>
            </ol>
        </div>

        <h3>‚ö†Ô∏è Negative Features (Not Helpful)</h3>
        <ul>
            <li><strong>product_avg_rating_meta (-0.4853):</strong> S·∫£n ph·∫©m c√≥ rating th·∫•p
                <ul>
                    <li>Review cho s·∫£n ph·∫©m t·ªá kh√≥ ƒë∆∞·ª£c vote helpful</li>
                    <li>C√≥ th·ªÉ do bias: ng∆∞·ªùi d√πng kh√¥ng th√≠ch vote cho s·∫£n ph·∫©m t·ªá</li>
                </ul>
            </li>
            <li><strong>sentiment_neg (-0.4433):</strong> Sentiment √¢m t√≠nh
                <ul>
                    <li>Review qu√° negative th∆∞·ªùng kh√¥ng helpful</li>
                    <li>C√≥ th·ªÉ l√† rant/complaint kh√¥ng constructive</li>
                </ul>
            </li>
            <li><strong>star_rating (-0.4211):</strong> Rating th·∫•p
                <ul>
                    <li>Review 1-2 sao th∆∞·ªùng l√† complaint</li>
                    <li>√çt th√¥ng tin chi ti·∫øt, nhi·ªÅu c·∫£m x√∫c</li>
                </ul>
            </li>
        </ul>

        <h2>üîß TECHNICAL DETAILS</h2>
        
        <h3>Model Configuration</h3>
        <ul>
            <li><strong>Algorithm:</strong> Logistic Regression</li>
            <li><strong>maxIter:</strong> 100 (increased from 80)</li>
            <li><strong>regParam:</strong> 0.0 (no regularization)</li>
            <li><strong>elasticNetParam:</strong> 0.0 (pure L2 if regularized)</li>
            <li><strong>Class weighting:</strong> pos_weight = 3.032</li>
        </ul>

        <h3>Feature Engineering Pipeline</h3>
        <ol>
            <li><strong>Text Processing:</strong>
                <ul>
                    <li>Tokenizer ‚Üí StopWordsRemover</li>
                    <li>HashingTF (20,000 features)</li>
                    <li>IDF (minDocFreq = 5)</li>
                </ul>
            </li>
            <li><strong>Metadata Processing:</strong>
                <ul>
                    <li>Numeric features: normalized & scaled</li>
                    <li>Binary features: 0/1 encoding</li>
                </ul>
            </li>
            <li><strong>Feature Assembly:</strong>
                <ul>
                    <li>VectorAssembler: TF-IDF + 11 metadata features</li>
                    <li>Total dimensions: 20,011</li>
                </ul>
            </li>
        </ol>

        <h3>Training Performance</h3>
        <ul>
            <li><strong>Training time:</strong> 24.2 seconds</li>
            <li><strong>Train samples:</strong> 80,500</li>
            <li><strong>Test samples:</strong> 19,863</li>
            <li><strong>Memory usage:</strong> 6GB driver + 4GB executor</li>
        </ul>

        <h2>üìã C√îNG VI·ªÜC ƒê√É HO√ÄN TH√ÄNH</h2>
        
        <h3>1. Infrastructure (Tu·∫•n)</h3>
        <ul>
            <li><span class="checkmark">‚úì</span> T·∫°o script <code>train_logreg_v2.py</code> v·ªõi full features</li>
            <li><span class="checkmark">‚úì</span> Refactor pipeline ƒë·ªÉ load 11 metadata features</li>
            <li><span class="checkmark">‚úì</span> Add feature importance analysis</li>
            <li><span class="checkmark">‚úì</span> Save metrics v·ªõi feature list</li>
        </ul>

        <h3>2. Data Science (Thanh)</h3>
        <ul>
            <li><span class="checkmark">‚úì</span> Integrate sentiment features (VADER)</li>
            <li><span class="checkmark">‚úì</span> Add product metadata features</li>
            <li><span class="checkmark">‚úì</span> Create interaction features (rating_deviation)</li>
            <li><span class="checkmark">‚úì</span> Analyze feature importance & impact</li>
        </ul>

        <h3>3. Results</h3>
        <ul>
            <li><span class="checkmark">‚úì</span> AUC-PR improved: 0.4353 ‚Üí 0.4490 (+3.1%)</li>
            <li><span class="checkmark">‚úì</span> AUC-ROC improved: 0.5967 ‚Üí 0.6200 (+3.9%)</li>
            <li><span class="checkmark">‚úì</span> Identified most important feature: <code>is_long_review</code></li>
            <li><span class="checkmark">‚úì</span> Model artifacts saved: <code>output/logreg_v2/</code></li>
        </ul>

        <h2>üöÄ K·∫æ HO·∫†CH NG√ÄY 5</h2>
        
        <div class="highlight-box">
            <h3 style="color: white; margin-top: 0;">M·ª•c Ti√™u: Hyperparameter Tuning & Advanced Models</h3>
            <ol style="font-size: 1.05em;">
                <li><strong>Hyperparameter Tuning (LogReg):</strong>
                    <ul>
                        <li>regParam: [0.0, 0.001, 0.01, 0.1]</li>
                        <li>elasticNetParam: [0.0, 0.5, 1.0]</li>
                        <li>numFeatures: [10K, 20K, 50K]</li>
                        <li>Target: AUC-PR > 0.47</li>
                    </ul>
                </li>
                <li><strong>Try LightGBM:</strong>
                    <ul>
                        <li>Gradient boosting model</li>
                        <li>Better v·ªõi categorical features</li>
                        <li>Faster training time</li>
                        <li>Target: AUC-PR > 0.55</li>
                    </ul>
                </li>
                <li><strong>Feature Engineering V3:</strong>
                    <ul>
                        <li>User aggregates: user avg rating, user total reviews</li>
                        <li>Product aggregates: product helpful ratio</li>
                        <li>Temporal features: review age, seasonality</li>
                    </ul>
                </li>
            </ol>
        </div>

        <h3>Expected Metrics (Day 5 Target)</h3>
        <table>
            <thead>
                <tr>
                    <th>Model</th>
                    <th>Features</th>
                    <th>AUC-PR Target</th>
                    <th>AUC-ROC Target</th>
                </tr>
            </thead>
            <tbody>
                <tr style="opacity: 0.5;">
                    <td>Day 4 (LogReg V2)</td>
                    <td>TF-IDF + 11 metadata</td>
                    <td>0.4490</td>
                    <td>0.6200</td>
                </tr>
                <tr style="background-color: #fff3e0;">
                    <td><strong>Day 5 (LogReg Tuned)</strong></td>
                    <td>TF-IDF + 11 metadata + tuning</td>
                    <td><strong>> 0.47</strong></td>
                    <td><strong>> 0.65</strong></td>
                </tr>
                <tr style="background-color: #e3f2fd;">
                    <td><strong>Day 5 (LightGBM)</strong></td>
                    <td>All features + tree-based</td>
                    <td><strong>> 0.55</strong></td>
                    <td><strong>> 0.75</strong></td>
                </tr>
            </tbody>
        </table>

        <h2>üí° KEY TAKEAWAYS</h2>
        
        <div class="success-box">
            <ol style="font-size: 1.05em;">
                <li><strong>is_long_review l√† feature quan tr·ªçng nh·∫•t:</strong> Review d√†i = helpful h∆°n (coef +1.61)</li>
                <li><strong>Sentiment features c√≥ t√°c ƒë·ªông:</strong> Negative sentiment ‚Üí less helpful</li>
                <li><strong>Product metadata quan tr·ªçng:</strong> S·∫£n ph·∫©m rating th·∫•p ‚Üí review kh√≥ helpful</li>
                <li><strong>Small improvements add up:</strong> +9 features ‚Üí +3.1% AUC-PR</li>
                <li><strong>Next step: Tree-based models:</strong> LightGBM c√≥ th·ªÉ capture non-linear patterns t·ªët h∆°n</li>
            </ol>
        </div>

        <div class="footer">
            <p><strong>Amazon Review Helpfulness Prediction</strong></p>
            <p>Nh√≥m HK7 | Tu·∫•n (Infrastructure) & Thanh (Data Science)</p>
            <p>Day 4 Completed: 26/10/2025 23:21</p>
            <p style="margin-top: 10px;">
                <strong>Next:</strong> Day 5 - Hyperparameter Tuning & LightGBM<br>
                <strong>Goal:</strong> AUC-PR > 0.55 | AUC-ROC > 0.75
            </p>
        </div>
    </div>
</body>
</html>
