<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>HK7 ‚Äî H∆∞·ªõng Ph√°t Tri·ªÉn (Roadmap) | Amazon Review Helpfulness</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<style>
  :root{
    --ink:#111827;--muted:#6b7280;--bg:#0ea5e9;--bg2:#22c55e;--card:#fff;
    --pri:#0ea5e9;--pri2:#22c55e;--warn:#f59e0b;--err:#ef4444;--ok:#10b981;--border:#e5e7eb;
    --shadow:0 18px 55px rgba(0,0,0,.14);
  }
  *{box-sizing:border-box}
  html,body{margin:0;padding:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:var(--ink);background:linear-gradient(135deg,#e0f2fe,#ecfdf5) fixed;}
  .wrap{max-width:1200px;margin:32px auto;padding:28px;border-radius:22px;background:var(--card);box-shadow:var(--shadow)}
  .hero{padding:36px;border-radius:18px;background:linear-gradient(135deg,var(--pri),var(--pri2));color:#fff;text-align:center}
  .hero h1{margin:0 0 8px;font-size:34px;letter-spacing:.2px}
  .hero p{margin:6px 0 0;opacity:.95}
  .badges{margin-top:14px;display:flex;gap:10px;justify-content:center;flex-wrap:wrap}
  .badge{display:inline-block;padding:6px 12px;border-radius:18px;font-weight:700;font-size:12px}
  .badge.goal{background:#6d28d9;color:#fff}
  .badge.kpi{background:#111827;color:#fff}
  .section{margin:28px 0 10px}
  .section h2{font-size:22px;margin:0 0 8px;color:#0ea5e9}
  .section h3{font-size:16px;margin:10px 0 6px;color:#111827}
  .card{background:#f8fafc;border:1px solid #eaeef5;border-radius:14px;padding:16px;box-shadow:0 8px 24px rgba(0,0,0,.06);margin:14px 0}
  .grid{display:grid;gap:14px}
  .grid.cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}
  .grid.cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}
  .grid.cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}
  .metric{background:#fff;border:1px solid #eef2f7;border-radius:14px;padding:16px;text-align:center}
  .metric .label{font-size:12px;color:var(--muted)}
  .metric .val{font-size:26px;font-weight:800;margin-top:4px;color:#111827}
  .metric.good .val{color:#10b981}
  .checklist{list-style:none;margin:0;padding:0}
  .checklist li{display:flex;align-items:flex-start;gap:10px;margin:8px 0}
  .check{width:22px;height:22px;border-radius:6px;border:2px solid #10b981;display:grid;place-items:center;font-size:14px;color:#10b981}
  .warn{border-left:5px solid #f59e0b;background:linear-gradient(135deg,#fff7ed,#fffbeb)}
  .ok{border-left:5px solid #10b981;background:linear-gradient(135deg,#ecfdf5,#f0fdf4)}
  .err{border-left:5px solid #ef4444;background:linear-gradient(135deg,#fee2e2,#fef2f2)}
  table{width:100%;border-collapse:collapse;border:1px solid var(--border);background:#fff;border-radius:12px;overflow:hidden}
  th,td{padding:10px 12px;border-bottom:1px solid var(--border);text-align:left;font-size:14px}
  thead th{background:#0ea5e9;color:#fff}
  tr:hover{background:#f9fafb}
  .links a{display:inline-block;margin:6px 8px 0 0;padding:8px 12px;border-radius:12px;background:#eef7ff;border:1px solid #dbeafe;text-decoration:none;color:#1d4ed8;font-weight:600}
  .pill{display:inline-block;padding:2px 8px;border-radius:999px;font-weight:700;font-size:12px}
  .pill.ok{background:#d1fae5;color:#065f46}
  .pill.todo{background:#e0e7ff;color:#3730a3}
  .note{font-size:12px;color:#6b7280}
  .footer{margin-top:24px;padding:20px 0;color:#94a3b8;text-align:center;font-size:13px}
  .code{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;background:#f8fafc;border:1px dashed #e5e7eb;border-radius:8px;padding:4px 6px}
</style>
</head>
<body>
  <div class="wrap">
    <div class="hero">
      <h1>üõ§Ô∏è H∆∞·ªõng Ph√°t Tri·ªÉn ‚Äî HK7</h1>
      <p>Amazon Review Helpfulness Prediction ‚Ä¢ Roadmap l√™n Production</p>
      <div class="badges">
        <span class="badge goal">M·ª•c ti√™u m·ªõi: AUC-PR &gt; 0.80</span>
        <span class="badge kpi">Ch√≠nh s√°ch: X·ª≠ l√Ω NULL <u>kh√¥ng xo√°</u> b·∫£n ghi</span>
      </div>
    </div>

    <!-- Links -->
    <div class="section">
      <h2>Li√™n K·∫øt Nhanh</h2>
      <div class="card">
        <div class="links">
          <a href="sandbox:/mnt/data/amazon_helpfulness_week_report.html">üìÑ B√°o c√°o t·ªïng h·ª£p 7 ng√†y</a>
          <a href="sandbox:/mnt/data/day1_report.html">Day 1</a>
          <a href="sandbox:/mnt/data/day2_report.html">Day 2</a>
          <a href="sandbox:/mnt/data/day3_report.html">Day 3</a>
          <a href="sandbox:/mnt/data/day4_report.html">Day 4</a>
          <a href="sandbox:/mnt/data/day5_report.html">Day 5</a>
          <a href="sandbox:/mnt/data/day6_experiments_report.html">Day 6</a>
          <a href="sandbox:/mnt/data/final_report.html">Day 7</a>
        </div>
      </div>
    </div>

    <!-- Objectives -->
    <div class="section">
      <h2>1) M·ª•c Ti√™u & KPI</h2>
      <div class="card grid cols-4">
        <div class="metric"><div class="label">AUC-PR hi·ªán t·∫°i</div><div class="val">0.7180</div></div>
        <div class="metric good"><div class="label">AUC-PR m·ª•c ti√™u</div><div class="val">‚â• 0.8000</div></div>
        <div class="metric"><div class="label">T·ª∑ l·ªá test d√πng</div><div class="val">100%</div><div class="note">Kh√¥ng gi·∫£m v√¨ NULL</div></div>
        <div class="metric"><div class="label">Time-to-infer</div><div class="val">&lt; 150ms</div><div class="note">p95 / sample</div></div>
      </div>
    </div>

    <!-- Data & NULL Policy -->
    <div class="section">
      <h2>2) Ch√≠nh S√°ch D·ªØ Li·ªáu & NULL (Auto-Imputation V2)</h2>
      <div class="card ok">
        <b>Nguy√™n t·∫Øc V2:</b> <span class="code">preprocess_spark_v2.py</span> t·ª± ƒë·ªông ph√°t hi·ªán T·∫§T C·∫¢ c·ªôt NULL v√† impute theo ki·ªÉu d·ªØ li·ªáu. <u>KH√îNG</u> d√πng <span class="code">handleInvalid="skip"</span> ‚Üí Kh√¥ng m·∫•t 62% test data!
      </div>
      <div class="card">
        <h3>2.1 Chi·∫øn L∆∞·ª£c Auto-Imputation</h3>
        <table>
          <thead><tr><th>Ki·ªÉu D·ªØ Li·ªáu</th><th>Chi·∫øn L∆∞·ª£c</th><th>V√≠ D·ª•</th><th>Fallback</th></tr></thead>
          <tbody>
            <tr><td><b>String</b></td><td>Mode per category ‚Üí "Unknown"</td><td>category, store ‚Üí "Unknown"</td><td>"Unknown"</td></tr>
            <tr><td><b>Numeric</b></td><td>Median per category ‚Üí Global median</td><td>price ‚Üí cat_median ‚Üí global_median ‚Üí 0.0</td><td>0.0</td></tr>
            <tr><td><b>Rating</b></td><td>Mean per category ‚Üí 3.0 (neutral)</td><td>average_rating ‚Üí cat_mean ‚Üí 3.0</td><td>3.0</td></tr>
            <tr><td><b>Count</b></td><td>0 (s·∫£n ph·∫©m m·ªõi)</td><td>rating_number ‚Üí 0</td><td>0</td></tr>
          </tbody>
        </table>
        <div class="note">‚úÖ ƒê√£ implement: <span class="code">impute_metadata_nulls()</span> - T·ª± ƒë·ªông x·ª≠ l√Ω M·ªåI c·ªôt NULL kh√¥ng c·∫ßn hardcode</div>
      </div>
      <div class="card">
        <h3>2.2 ETL Pipeline V2 (3 Steps)</h3>
        <ul class="checklist">
          <li><span class="check">‚úì</span> <b>Step 1:</b> <span class="code">preprocess_spark_v2.py</span> ‚Üí Load reviews + metadata ‚Üí Auto-impute NULL ‚Üí Save parquet</li>
          <li><span class="check">‚úì</span> <b>Step 2:</b> <span class="code">train_test_split_v2.py</span> ‚Üí Stratified split (0.8/0.2) ‚Üí Validate no NULL ‚Üí Save train/test</li>
          <li><span class="check">‚úì</span> <b>Step 3:</b> <span class="code">feature_pipeline_v2.py</span> ‚Üí Normalize columns ‚Üí Text + Metadata + Sentiment ‚Üí VectorAssembler (handleInvalid="keep")</li>
        </ul>
        <div class="note">üìä <b>K·∫øt qu·∫£:</b> Test coverage <span style="color:#10b981">100%</span> (vs V1: 37.7%) - Kh√¥ng m·∫•t data do NULL!</div>
      </div>
    </div>    <!-- Features -->
    <div class="section">
      <h2>3) K·ªπ Thu·∫≠t ƒê·∫∑c Tr∆∞ng (Feature Engineering V2)</h2>
      <p><b>File:</b> <span class="code">feature_pipeline_v2.py</span> - Kh√¥ng d√πng Python UDF (tr√°nh l·ªói Windows)</p>
      <div class="card grid cols-3">
        <div>
          <h3>Text Features (9)</h3>
          <ul class="checklist">
            <li><span class="check">‚úì</span> <b>cleaned_text</b> (regex)</li>
            <li><span class="check">‚úì</span> <b>word_count</b></li>
            <li><span class="check">‚úì</span> <b>char_count</b></li>
            <li><span class="check">‚úì</span> <b>avg_word_len</b></li>
            <li><span class="check">‚úì</span> <b>is_long_review</b> (‚â•100)</li>
            <li><span class="check">‚úì</span> <b>TF-IDF/HashingTF</b> (10K)</li>
          </ul>
        </div>
        <div>
          <h3>Sentiment (Dictionary)</h3>
          <ul class="checklist">
            <li><span class="check">‚úì</span> <b>sent_pos</b> (count)</li>
            <li><span class="check">‚úì</span> <b>sent_neg</b> (count)</li>
            <li><span class="check">‚úì</span> <b>sent_score</b> (norm)</li>
            <li><span class="note">array_intersect (kh√¥ng UDF)</span></li>
          </ul>
        </div>
        <div>
          <h3>Metadata (7+)</h3>
          <ul class="checklist">
            <li><span class="check">‚úì</span> <b>review_length</b> + log</li>
            <li><span class="check">‚úì</span> <b>star_rating</b></li>
            <li><span class="check">‚úì</span> <b>price</b> + log</li>
            <li><span class="check">‚úì</span> <b>is_verified</b></li>
            <li><span class="check">‚úì</span> <b>helpful_votes</b></li>
          </ul>
        </div>
      </div>
      <div class="card">
        <h3>Feature Presets (--preset)</h3>
        <table>
          <thead><tr><th>Preset</th><th>Text</th><th>Sentiment</th><th>TF-IDF</th><th>Metadata</th><th>Dim</th></tr></thead>
          <tbody>
            <tr><td><b>baseline</b></td><td>‚úó</td><td>‚úó</td><td>‚úó</td><td>‚úì</td><td>~10</td></tr>
            <tr><td><b>simple</b></td><td>‚úì</td><td>‚úó</td><td>‚úó</td><td>‚úì</td><td>~20</td></tr>
            <tr><td><b>full</b></td><td>‚úì</td><td>‚úì</td><td>‚úì (10K)</td><td>‚úì</td><td>10,017</td></tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Modeling & Tuning -->
    <div class="section">
      <h2>4) M√¥ H√¨nh & T·ªëi ∆Øu</h2>
      <div class="card grid cols-2">
        <div>
          <h3>4.1 LightGBM (m·ªü r·ªông kh√¥ng gian)</h3>
          <ul class="checklist">
            <li><span class="check">‚úì</span> Random / Bayesian search (Optuna/Hyperopt)</li>
            <li><span class="check">‚úì</span> Space: <span class="code">num_leaves, max_depth, min_data_in_leaf, learning_rate, n_estimators, feature_fraction, bagging_fraction, lambda_l1/l2</span></li>
            <li><span class="check">‚úì</span> Class weighting & early stopping</li>
          </ul>
        </div>
        <div>
          <h3>4.2 Ensemble (Stacking)</h3>
          <ul class="checklist">
            <li><span class="check">‚úì</span> Base: LGBM (tuned), XGBoost, LogReg (metadata + U/P)</li>
            <li><span class="check">‚úì</span> Meta: LogReg ho·∫∑c LGBM nh·ªè</li>
            <li><span class="check">‚úì</span> OOF predictions, tr√°nh leakage</li>
          </ul>
        </div>
      </div>
      <div class="card">
        <h3>4.3 Deep Learning (tu·ª≥ ch·ªçn)</h3>
        <ul class="checklist">
          <li><span class="check">‚úì</span> BERT embeddings nh∆∞ feature</li>
          <li><span class="check">‚úì</span> Fine-tune BERT cho is_helpful (c·∫ßn GPU)</li>
        </ul>
      </div>
    </div>

    <!-- Evaluation -->
    <div class="section">
      <h2>5) ƒê√°nh Gi√° & M·ª•c Ti√™u Theo D√µi</h2>
      <div class="card grid cols-2">
        <div>
          <canvas id="prChart" height="140"></canvas>
          <div class="note">Minh ho·∫° PR Curve (placeholder). Khi c√≥ ƒëi·ªÉm, thay m·∫£ng d·ªØ li·ªáu ph√≠a d∆∞·ªõi.</div>
        </div>
        <div>
          <table>
            <thead><tr><th>Metric</th><th>M·ª•c ti√™u</th><th>Ghi ch√∫</th></tr></thead>
            <tbody>
              <tr><td>AUC-PR</td><td>&ge; 0.80</td><td>Ch√≠nh</td></tr>
              <tr><td>Precision@Top-5%</td><td>&ge; 0.82</td><td>Ph√π h·ª£p use-case ‚Äú∆∞u ti√™n review h·ªØu √≠ch‚Äù</td></tr>
              <tr><td>Recall@Top-5%</td><td>&ge; 0.55</td><td>C√¢n b·∫±ng</td></tr>
              <tr><td>Latency (p95)</td><td>&lt; 150ms</td><td>Online inference</td></tr>
            </tbody>
          </table>
        </div>
      </div>
      <div class="card">
        <h3>5.1 Ph√¢n t√≠ch l·ªói theo l√°t c·∫Øt</h3>
        <ul class="checklist">
          <li><span class="check">‚úì</span> rating 1‚Äì3 vs 4‚Äì5</li>
          <li><span class="check">‚úì</span> verified vs non-verified</li>
          <li><span class="check">‚úì</span> user m·ªõi/c≈© (theo user_review_count)</li>
          <li><span class="check">‚úì</span> product √≠t/nhi·ªÅu review</li>
        </ul>
      </div>
    </div>

    <!-- Production readiness -->
    <div class="section">
      <h2>6) S·∫µn S√†ng Production</h2>
      <div class="card grid cols-3">
        <div>
          <h3>Monitoring</h3>
          <ul class="checklist">
            <li><span class="check">‚úì</span> Input/schema drift + missing rate</li>
            <li><span class="check">‚úì</span> Embedding drift (text)</li>
            <li><span class="check">‚úì</span> Online precision@k</li>
          </ul>
        </div>
        <div>
          <h3>Explainability</h3>
          <ul class="checklist">
            <li><span class="check">‚úì</span> SHAP global & per-sample</li>
            <li><span class="check">‚úì</span> Top features: user/product/text</li>
          </ul>
        </div>
        <div>
          <h3>Ops</h3>
          <ul class="checklist">
            <li><span class="check">‚úì</span> Tracking (mlflow)</li>
            <li><span class="check">‚úì</span> Version: data/model/code</li>
            <li><span class="check">‚úì</span> Inference graph (imputer ‚Üí featurizer ‚Üí model)</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Timeline -->
    <div class="section">
      <h2>7) L·ªô Tr√¨nh Th·ª±c Thi (4 tu·∫ßn g·ª£i √Ω)</h2>
      <div class="card">
        <canvas id="timeline" height="110"></canvas>
        <div class="note">Gantt r√∫t g·ªçn: t·ª∑ l·ªá th·ªùi gian theo tu·∫ßn. ƒêi·ªÅu ch·ªânh theo th·ª±c t·∫ø t√†i nguy√™n.</div>
      </div>
      <div class="card">
        <table>
          <thead><tr><th>Tu·∫ßn</th><th>H·∫°ng m·ª•c</th><th>Deliverables</th><th>Done?</th></tr></thead>
          <tbody>
            <tr><td>1</td><td>Imputation + Join chu·∫©n</td><td>Transformer impute + c·ªù missing; test kh√¥ng drop</td><td><span class="pill todo">TODO</span></td></tr>
            <tr><td>2</td><td>User/Product features</td><td>UDF agg theo user_id, parent_asin; cache parquet</td><td><span class="pill todo">TODO</span></td></tr>
            <tr><td>3</td><td>Tuning LGBM (Optuna)</td><td>Study v·ªõi 50‚Äì100 trials; early stopping</td><td><span class="pill todo">TODO</span></td></tr>
            <tr><td>4</td><td>Stacking + ƒê√°nh gi√°</td><td>OOF, meta-model; PR@k; b√°o c√°o SHAP</td><td><span class="pill todo">TODO</span></td></tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Risks -->
    <div class="section">
      <h2>8) R·ªßi Ro & Bi·ªán Ph√°p</h2>
      <div class="card warn">
        <ul class="checklist">
          <li><span class="check">!</span> <b>Skew n·∫∑ng & ph√¢n l·ªõp l·ªách</b> ‚Üí d√πng class_weight/scale_pos_weight, balanced subsampling.</li>
          <li><span class="check">!</span> <b>Leakage khi t·∫°o feature U/P</b> ‚Üí ch·ªâ t√≠nh tr√™n train fold; OOF strict.</li>
          <li><span class="check">!</span> <b>Chi ph√≠ BERT</b> ‚Üí b·∫Øt ƒë·∫ßu t·ª´ embeddings; ch·ªâ fine-tune n·∫øu c·∫ßn th√™m & c√≥ GPU.</li>
        </ul>
      </div>
    </div>

    <div class="footer">
      <div>HK7 ‚Äî Roadmap n√¢ng AUC-PR l√™n &gt; 0.8 v√† s·∫µn s√†ng production</div>
      <div class="note">T√†i li·ªáu n√†y l√† ‚Äús·ªëng‚Äù: c·∫≠p nh·∫≠t sau m·ªói m·ªëc quan tr·ªçng.</div>
    </div>
  </div>

<script>
// PR Curve (placeholder data)
const prCtx = document.getElementById('prChart');
new Chart(prCtx,{
  type:'line',
  data:{
    labels:[0.0,0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9,1.0],
    datasets:[{
      label:'Precision',
      data:[0.95,0.92,0.88,0.83,0.78,0.72,0.65,0.58,0.49,0.38,0.28],
      borderWidth:3,tension:.25,fill:false
    }]
  },
  options:{plugins:{legend:{display:false}},scales:{y:{min:0,max:1}}}
});

// Timeline (Gantt-ish)
const tl = document.getElementById('timeline');
new Chart(tl,{
  type:'bar',
  data:{
    labels:['Tu·∫ßn 1','Tu·∫ßn 2','Tu·∫ßn 3','Tu·∫ßn 4'],
    datasets:[
      {label:'Imputation/Join', data:[1,0,0,0]},
      {label:'U/P Features', data:[0,1,0,0]},
      {label:'Tuning LGBM', data:[0,0,1,0]},
      {label:'Stacking & Eval', data:[0,0,0,1]}
    ]
  },
  options:{
    indexAxis:'y',
    plugins:{legend:{display:true}},
    scales:{x:{stacked:true,min:0,max:1},y:{stacked:true}},
  }
});
</script>
</body>
</html>